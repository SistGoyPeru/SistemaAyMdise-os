{% extends 'base.html' %}

{% block title %}Productos Base - SistGoy ERP{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Productos Base</h2>
    <div class="d-flex gap-2">
        <form class="d-flex" method="get">
            <input class="form-control me-2" type="search" name="q" placeholder="Buscar producto..." aria-label="Buscar"
                value="{{ request.GET.q }}">
            <button class="btn btn-outline-success" type="submit"><i class="fas fa-search"></i></button>
        </form>
        <a href="{% url 'baseproduct-add' %}" class="btn btn-primary"><i class="fas fa-plus me-2"></i> Nuevo Producto
            Base</a>
    </div>
</div>

<div class="card card-glass border-0 shadow-sm">
    <div class="table-responsive">
        <table class="table table-hover align-middle mb-0">
            <thead class="bg-light">
                <tr>
                    <th class="ps-4">Nombre</th>
                    <th>Descripción</th>
                    <th>Stock Actual</th>
                    <th>Stock Mínimo</th>
                    <th>Costo</th>
                    <th class="pe-4 text-end">Acciones</th>
                </tr>
            </thead>
            <tbody>
                {% for product in products %}
                <tr {% if product.stock <= product.min_stock %}class="table-danger" {% endif %}>
                    <td class="ps-4 fw-bold">{{ product.name }}</td>
                    <td>{{ product.description|truncatechars:50 }}</td>
                    <td>{{ product.stock }}</td>
                    <td>{{ product.min_stock }}</td>
                    <td>{{ product.cost }}</td>
                    <td class="pe-4 text-end">
                        <a href="{% url 'baseproduct-edit' product.pk %}" class="btn btn-sm btn-outline-primary"><i
                                class="fas fa-edit"></i></a>
                        <a href="{% url 'baseproduct-delete' product.pk %}"
                            class="btn btn-sm btn-outline-danger ms-1"><i class="fas fa-trash"></i></a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6" class="text-center py-4 text-muted">No hay productos base registrados.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}